!function(){"use strict";var e,t,n,_,o,r,i,l,u,c,s,a={},f=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,p=Array.isArray;function h(e,t){for(var n in t)e[n]=t[n];return e}function v(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function m(t,n,_){var o,r,i,l={};for(i in n)"key"==i?o=n[i]:"ref"==i?r=n[i]:l[i]=n[i];if(arguments.length>2&&(l.children=arguments.length>3?e.call(arguments,2):_),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===l[i]&&(l[i]=t.defaultProps[i]);return y(t,l,o,r,null)}function y(e,_,o,r,i){var l={type:e,props:_,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==i?++n:i,__i:-1,__u:0};return null==i&&null!=t.vnode&&t.vnode(l),l}function g(e){return e.children}function b(e,t){this.props=e,this.context=t}function w(e,t){if(null==t)return e.__?w(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?w(e):null}function k(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return k(e)}}function S(e){(!e.__d&&(e.__d=!0)&&_.push(e)&&!H.__r++||o!=t.debounceRendering)&&((o=t.debounceRendering)||r)(H)}function H(){for(var e,n,o,r,l,u,c,s=1;_.length;)_.length>s&&_.sort(i),e=_.shift(),s=_.length,e.__d&&(o=void 0,r=void 0,l=(r=(n=e).__v).__e,u=[],c=[],n.__P&&((o=h({},r)).__v=r.__v+1,t.vnode&&t.vnode(o),T(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[l]:null,u,null==l?w(r):l,!!(32&r.__u),c),o.__v=r.__v,o.__.__k[o.__i]=o,A(u,o,c),r.__e=r.__=null,o.__e!=l&&k(o)));H.__r=0}function x(e,t,n,_,o,r,i,l,u,c,s){var d,h,v,m,b,k,S,H=_&&_.__k||f,x=t.length;for(u=function(e,t,n,_,o){var r,i,l,u,c,s=n.length,a=s,f=0;for(e.__k=new Array(o),r=0;r<o;r++)null!=(i=t[r])&&"boolean"!=typeof i&&"function"!=typeof i?("string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?i=e.__k[r]=y(null,i,null,null,null):p(i)?i=e.__k[r]=y(g,{children:i},null,null,null):null==i.constructor&&i.__b>0?i=e.__k[r]=y(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):e.__k[r]=i,u=r+f,i.__=e,i.__b=e.__b+1,l=null,-1!=(c=i.__i=E(i,n,u,a))&&(a--,(l=n[c])&&(l.__u|=2)),null==l||null==l.__v?(-1==c&&(o>s?f--:o<s&&f++),"function"!=typeof i.type&&(i.__u|=4)):c!=u&&(c==u-1?f--:c==u+1?f++:(c>u?f--:f++,i.__u|=4))):e.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(l=n[r])&&!(2&l.__u)&&(l.__e==_&&(_=w(l)),L(l,l));return _}(n,t,H,u,x),d=0;d<x;d++)null!=(v=n.__k[d])&&(h=-1==v.__i?a:H[v.__i]||a,v.__i=d,k=T(e,v,h,o,r,i,l,u,c,s),m=v.__e,v.ref&&h.ref!=v.ref&&(h.ref&&I(h.ref,null,v),s.push(v.ref,v.__c||m,v)),null==b&&null!=m&&(b=m),(S=!!(4&v.__u))||h.__k===v.__k?u=C(v,u,e,S):"function"==typeof v.type&&void 0!==k?u=k:m&&(u=m.nextSibling),v.__u&=-7);return n.__e=b,u}function C(e,t,n,_){var o,r;if("function"==typeof e.type){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=C(o[r],t,n,_));return t}e.__e!=t&&(_&&(t&&e.type&&!t.parentNode&&(t=w(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function E(e,t,n,_){var o,r,i,l=e.key,u=e.type,c=t[n],s=null!=c&&!(2&c.__u);if(null===c&&null==l||s&&l==c.key&&u==c.type)return n;if(_>(s?1:0))for(o=n-1,r=n+1;o>=0||r<t.length;)if(null!=(c=t[i=o>=0?o--:r++])&&!(2&c.__u)&&l==c.key&&u==c.type)return i;return-1}function N(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||d.test(t)?n:n+"px"}function M(e,t,n,_,o){var r,i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof _&&(e.style.cssText=_=""),_)for(t in _)n&&t in n||N(e.style,t,"");if(n)for(t in n)_&&n[t]==_[t]||N(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])r=t!=(t=t.replace(l,"$1")),i=t.toLowerCase(),t=i in e||"onFocusOut"==t||"onFocusIn"==t?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?_?n.u=_.u:(n.u=u,e.addEventListener(t,r?s:c,r)):e.removeEventListener(t,r?s:c,r);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function P(e){return function(n){if(this.l){var _=this.l[n.type+e];if(null==n.t)n.t=u++;else if(n.t<_.u)return;return _(t.event?t.event(n):n)}}}function T(e,n,_,o,r,i,l,u,c,s){var a,f,d,m,y,w,k,S,H,C,E,N,M,P,T,A,I,L=n.type;if(null!=n.constructor)return null;128&_.__u&&(c=!!(32&_.__u),i=[u=n.__e=_.__e]),(a=t.__b)&&a(n);e:if("function"==typeof L)try{if(S=n.props,H="prototype"in L&&L.prototype.render,C=(a=L.contextType)&&o[a.__c],E=a?C?C.props.value:a.__:o,_.__c?k=(f=n.__c=_.__c).__=f.__E:(H?n.__c=f=new L(S,E):(n.__c=f=new b(S,E),f.constructor=L,f.render=$),C&&C.sub(f),f.state||(f.state={}),f.__n=o,d=f.__d=!0,f.__h=[],f._sb=[]),H&&null==f.__s&&(f.__s=f.state),H&&null!=L.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=h({},f.__s)),h(f.__s,L.getDerivedStateFromProps(S,f.__s))),m=f.props,y=f.state,f.__v=n,d)H&&null==L.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),H&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(H&&null==L.getDerivedStateFromProps&&S!==m&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(S,E),n.__v==_.__v||!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(S,f.__s,E)){for(n.__v!=_.__v&&(f.props=S,f.state=f.__s,f.__d=!1),n.__e=_.__e,n.__k=_.__k,n.__k.some(function(e){e&&(e.__=n)}),N=0;N<f._sb.length;N++)f.__h.push(f._sb[N]);f._sb=[],f.__h.length&&l.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(S,f.__s,E),H&&null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(m,y,w)})}if(f.context=E,f.props=S,f.__P=e,f.__e=!1,M=t.__r,P=0,H){for(f.state=f.__s,f.__d=!1,M&&M(n),a=f.render(f.props,f.state,f.context),T=0;T<f._sb.length;T++)f.__h.push(f._sb[T]);f._sb=[]}else do{f.__d=!1,M&&M(n),a=f.render(f.props,f.state,f.context),f.state=f.__s}while(f.__d&&++P<25);f.state=f.__s,null!=f.getChildContext&&(o=h(h({},o),f.getChildContext())),H&&!d&&null!=f.getSnapshotBeforeUpdate&&(w=f.getSnapshotBeforeUpdate(m,y)),A=a,null!=a&&a.type===g&&null==a.key&&(A=U(a.props.children)),u=x(e,p(A)?A:[A],n,_,o,r,i,l,u,c,s),f.base=n.__e,n.__u&=-161,f.__h.length&&l.push(f),k&&(f.__E=f.__=null)}catch(e){if(n.__v=null,c||null!=i)if(e.then){for(n.__u|=c?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,n.__e=u}else{for(I=i.length;I--;)v(i[I]);D(n)}else n.__e=_.__e,n.__k=_.__k,e.then||D(n);t.__e(e,n,_)}else null==i&&n.__v==_.__v?(n.__k=_.__k,n.__e=_.__e):u=n.__e=F(_.__e,n,_,o,r,i,l,c,s);return(a=t.diffed)&&a(n),128&n.__u?void 0:u}function D(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(D)}function A(e,n,_){for(var o=0;o<_.length;o++)I(_[o],_[++o],_[++o]);t.__c&&t.__c(n,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(e){e.call(n)})}catch(e){t.__e(e,n.__v)}})}function U(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:p(e)?e.map(U):h({},e)}function F(n,_,o,r,i,l,u,c,s){var f,d,h,m,y,g,b,k=o.props||a,S=_.props,H=_.type;if("svg"==H?i="http://www.w3.org/2000/svg":"math"==H?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=l)for(f=0;f<l.length;f++)if((y=l[f])&&"setAttribute"in y==!!H&&(H?y.localName==H:3==y.nodeType)){n=y,l[f]=null;break}if(null==n){if(null==H)return document.createTextNode(S);n=document.createElementNS(i,H,S.is&&S),c&&(t.__m&&t.__m(_,l),c=!1),l=null}if(null==H)k===S||c&&n.data==S||(n.data=S);else{if(l=l&&e.call(n.childNodes),!c&&null!=l)for(k={},f=0;f<n.attributes.length;f++)k[(y=n.attributes[f]).name]=y.value;for(f in k)if(y=k[f],"children"==f);else if("dangerouslySetInnerHTML"==f)h=y;else if(!(f in S)){if("value"==f&&"defaultValue"in S||"checked"==f&&"defaultChecked"in S)continue;M(n,f,null,y,i)}for(f in S)y=S[f],"children"==f?m=y:"dangerouslySetInnerHTML"==f?d=y:"value"==f?g=y:"checked"==f?b=y:c&&"function"!=typeof y||k[f]===y||M(n,f,y,k[f],i);if(d)c||h&&(d.__html==h.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),_.__k=[];else if(h&&(n.innerHTML=""),x("template"==_.type?n.content:n,p(m)?m:[m],_,o,r,"foreignObject"==H?"http://www.w3.org/1999/xhtml":i,l,u,l?l[0]:o.__k&&w(o,0),c,s),null!=l)for(f=l.length;f--;)v(l[f]);c||(f="value","progress"==H&&null==g?n.removeAttribute("value"):null!=g&&(g!==n[f]||"progress"==H&&!g||"option"==H&&g!=k[f])&&M(n,f,g,k[f],i),f="checked",null!=b&&b!=n[f]&&M(n,f,b,k[f],i))}return n}function I(e,n,_){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==n||(e.__u=e(n))}else e.current=n}catch(e){t.__e(e,_)}}function L(e,n,_){var o,r;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||I(o,null,n)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&L(o[r],n,_||"function"!=typeof e.type);_||v(e.__e),e.__c=e.__=e.__e=void 0}function $(e,t,n){return this.constructor(e,n)}e=f.slice,t={__e:function(e,t,n,_){for(var o,r,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&null!=r.getDerivedStateFromError&&(o.setState(r.getDerivedStateFromError(e)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,_||{}),i=o.__d),i)return o.__E=o}catch(t){e=t}throw e}},n=0,b.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=h({},this.state),"function"==typeof e&&(e=e(h({},n),this.props)),e&&h(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),S(this))},b.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},b.prototype.render=g,_=[],r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=function(e,t){return e.__v.__b-t.__v.__b},H.__r=0,l=/(PointerCapture)$|Capture$/i,u=0,c=P(!1),s=P(!0);var W,O,q,R,z=0,B=[],j=t,V=j.__b,G=j.__r,J=j.diffed,K=j.__c,Q=j.unmount,X=j.__;function Y(e,t){j.__h&&j.__h(O,e,z||t),z=0;var n=O.__H||(O.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Z(e){return z=1,function(e,t){var n=Y(W++,2);if(n.t=e,!n.__c&&(n.__=[ie(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],_=n.t(t,e);t!==_&&(n.__N=[_,n.__[1]],n.__c.setState({}))}],n.__c=O,!O.__f)){var _=function(e,t,_){if(!n.__c.__H)return!0;var r=n.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!o||o.call(this,e,t,_);var i=n.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}}),o&&o.call(this,e,t,_)||i};O.__f=!0;var o=O.shouldComponentUpdate,r=O.componentWillUpdate;O.componentWillUpdate=function(e,t,n){if(this.__e){var i=o;o=void 0,_(e,t,n),o=i}r&&r.call(this,e,t,n)},O.shouldComponentUpdate=_}return n.__N||n.__}(ie,e)}function ee(e,t){var n=Y(W++,3);!j.__s&&function(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}(n.__H,t)&&(n.__=e,n.u=t,O.__H.__h.push(n))}function te(){for(var e;e=B.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(oe),e.__H.__h.forEach(re),e.__H.__h=[]}catch(t){e.__H.__h=[],j.__e(t,e.__v)}}j.__b=function(e){O=null,V&&V(e)},j.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),X&&X(e,t)},j.__r=function(e){G&&G(e),W=0;var t=(O=e.__c).__H;t&&(q===O?(t.__h=[],O.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(oe),t.__h.forEach(re),t.__h=[],W=0)),q=O},j.diffed=function(e){J&&J(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==B.push(t)&&R===j.requestAnimationFrame||((R=j.requestAnimationFrame)||_e)(te)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),q=O=null},j.__c=function(e,t){t.some(function(e){try{e.__h.forEach(oe),e.__h=e.__h.filter(function(e){return!e.__||re(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],j.__e(n,e.__v)}}),K&&K(e,t)},j.unmount=function(e){Q&&Q(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{oe(e)}catch(e){t=e}}),n.__H=void 0,t&&j.__e(t,n.__v))};var ne="function"==typeof requestAnimationFrame;function _e(e){var t,n=function(){clearTimeout(_),ne&&cancelAnimationFrame(t),setTimeout(e)},_=setTimeout(n,35);ne&&(t=requestAnimationFrame(n))}function oe(e){var t=O,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),O=t}function re(e){var t=O;e.__c=e.__(),O=t}function ie(e,t){return"function"==typeof t?t(e):t}function le({config:e}){const[t,n]=Z(null),[_,o]=Z(null),[r,i]=Z(!1),[l,u]=Z(!0);ee(()=>{c()},[]),ee(()=>{if(!t)return;const e=setInterval(()=>{s()},1e3);return()=>clearInterval(e)},[t]);const c=async()=>{try{const{shop:t,productId:_}=e,o=`/apps/countdown-timer/timers/active?shop=${t}&product_id=${_}`,r=await fetch(o),i=await r.json();if(n(i.timer),u(!1),i.timer&&("top"===i.timer.displayOptions.position||"bottom"===i.timer.displayOptions.position)){const e=document.querySelector("#countdown-timer-widget");e&&e.parentNode!==document.body&&document.body.appendChild(e)}}catch(e){console.error("Error fetching timer:",e),u(!1)}},s=()=>{if(!t)return;const e=(new Date).getTime(),n=new Date(t.endDate).getTime()-e;if(n<=0)return void o(null);const _=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),l=Math.floor(n%36e5/6e4),u=Math.floor(n%6e4/1e3),c=60*t.urgencySettings.threshold*1e3;i(t.urgencySettings.enabled&&n<=c),o({days:_,hours:r,minutes:l,seconds:u})};if(l)return m("div",{class:"countdown-timer-loading"},"Loading timer...");if(!t)return null;if(!_)return m("div",{class:"countdown-timer-expired"},"This promotion has ended");const{displayOptions:a,urgencySettings:f,description:d}=t;return m("div",{class:`countdown-timer ${r&&f.pulseEffect?"urgency-mode":""} ${`size-${a.fontSize}`} ${`pos-${a.position}`}`,style:{backgroundColor:a.backgroundColor,backgroundImage:"none",color:a.textColor,borderColor:a.textColor}},[r&&f.showBanner&&m("div",{class:"countdown-timer-banner"},f.bannerText),m("div",{class:"countdown-timer-description"},d),m("div",{class:"countdown-timer-clock"},[a.showDays&&_.days>0&&m(ue,{value:_.days,label:"Days"}),a.showHours&&m(ue,{value:_.hours,label:"Hours"}),a.showMinutes&&m(ue,{value:_.minutes,label:"Minutes"}),a.showSeconds&&m(ue,{value:_.seconds,label:"Seconds"})])])}function ue({value:e,label:t}){return m("div",{class:"countdown-timer-unit"},[m("div",{class:"countdown-timer-value"},String(e).padStart(2,"0")),m("div",{class:"countdown-timer-label"},t)])}if("undefined"!=typeof window){const n=()=>{document.querySelectorAll("#countdown-timer-widget").forEach(n=>{console.log("Initializing Countdown Widget on container:",n);if(!("true"===n.getAttribute("data-enabled")))return void(n.style.display="none");const _={shop:n.getAttribute("data-shop"),productId:n.getAttribute("data-product-id"),position:n.getAttribute("data-position")};_.shop&&_.productId&&function(n,_){var o,r,i;_==document&&(_=document.documentElement),t.__&&t.__(n,_),o=_.__k,r=[],i=[],T(_,n=_.__k=m(g,null,[n]),o||a,a,_.namespaceURI,o?null:_.firstChild?e.call(_.childNodes):null,r,o?o.__e:_.firstChild,!1,i),A(r,n,i)}(m(le,{config:_}),n)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),window.Shopify&&window.Shopify.designMode&&document.addEventListener("shopify:section:load",n)}}();
